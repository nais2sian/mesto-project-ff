{"version":3,"file":"main.js","mappings":"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","sources":["webpack://yandex_praktikum/./src/scripts/api.js","webpack://yandex_praktikum/./src/scripts/card.js","webpack://yandex_praktikum/./src/scripts/modal.js","webpack://yandex_praktikum/./src/scripts/validation.js","webpack://yandex_praktikum/./src/scripts/index.js"],"sourcesContent":["const config = {\r\n  baseUrl:\"https://nomoreparties.co/v1/wff-cohort-12\",\r\n  headers: {\r\n    authorization: \"63f0e1bd-551c-4a91-abdc-db7a53e874be\",\r\n    \"Content-Type\": \"application/json\",\r\n  },\r\n};\r\n\r\nfunction getUserData() {\r\n  return fetch(`${config.baseUrl}/users/me`, {\r\n    headers: config.headers,\r\n})\r\n    .then((res) => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    })\r\n}\r\n\r\nfunction getCardsData() {\r\n  return fetch(`${config.baseUrl}/cards`, {\r\n    headers: config.headers,\r\n  })\r\n    .then((res) => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    })\r\n}\r\n\r\n///Редактирование профиля\r\nfunction updateProfile(name, job) {\r\n  return fetch(`${config.baseUrl}/users/me`, {\r\n    method: \"PATCH\",\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      name: name,\r\n      about: job,\r\n    }),\r\n}).then((response) => {\r\n      if (response.ok) {\r\n        return response.json();\r\n      }\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    })\r\n}\r\n\r\n///Добавление новой карточки\r\nfunction postCard(place, link) {\r\n  return fetch(`${config.baseUrl}/cards`, {\r\n    method: \"POST\",\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      name: place,\r\n      link: link,\r\n    }),\r\n  }).then((response) => {\r\n    if (response.ok) {\r\n      return response.json();\r\n    }\r\n    return Promise.reject(`Ошибка: ${res.status}`);\r\n  });\r\n}\r\n\r\n///Удаление карточки\r\nfunction deleteServerCard(id) {\r\n  return fetch(`${config.baseUrl}/cards/${id}`, {\r\n    method: \"DELETE\",\r\n    headers: config.headers\r\n  })\r\n    .then((response) => {\r\n      if (response.ok) {\r\n        return response.json();\r\n      }\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    })\r\n}\r\n\r\n/// Поставить лайк\r\nfunction setLike(id) {\r\n  return fetch(`${config.baseUrl}/cards/likes/${id}`, {\r\n    headers: config.headers,\r\n    method: \"PUT\",\r\n  })\r\n    .then((response) => {\r\n      if (!response.ok) {\r\n        throw new Error(\"Network response was not ok.\");\r\n      }\r\n      return response.json();\r\n    })\r\n    .then((data) => {\r\n      return data;\r\n    })\r\n}\r\n\r\n/// Удалить лайк\r\nfunction deleteLike(id) {\r\n  return fetch(`${config.baseUrl}/cards/likes/${id}`, {\r\n    headers: config.headers,\r\n    method: \"DELETE\",\r\n  }).then((response) => {\r\n    if (response.ok) {\r\n      return response.json();\r\n    }\r\n    return Promise.reject(`Ошибка: ${res.status}`);\r\n  });\r\n}\r\n\r\n/// Обновление аватара пользователя\r\nfunction newAvatar(link) {\r\n  return fetch(`${config.baseUrl}/users/me/avatar`, {\r\n    headers: config.headers,\r\n    method: \"PATCH\",\r\n    body: JSON.stringify({\r\n      avatar: link,\r\n    }),\r\n  }).then((response) => {\r\n    if (response.ok) {\r\n      return response.json();\r\n    }\r\n    return Promise.reject(`Ошибка: ${res.status}`);\r\n  });\r\n}\r\n\r\nexport {\r\n  getUserData,\r\n  getCardsData,\r\n  updateProfile,\r\n  postCard,\r\n  deleteServerCard,\r\n  setLike,\r\n  deleteLike,\r\n  newAvatar,\r\n};\r\n","import { setLike, deleteLike } from \"./api.js\";\r\n\r\nfunction createCard(cardElements, deleteFunc, openImg, userId) {\r\n  const template = document.querySelector(\"#card-template\").content;\r\n  const card = template.querySelector(\".places__item.card\").cloneNode(true);\r\n  const button = card.querySelector(\".card__delete-button\");\r\n  const cardContainer = card.querySelector(\".card__description\");\r\n  const likesBox = cardContainer.querySelector(\".likeCounter\");\r\n  const likeButton = cardContainer.querySelector(\".card__like-button\");\r\n  const cardImage = card.querySelector(\".card__image\");\r\n  const cardDescription = card.querySelector(\".card__title\");\r\n  cardImage.src = cardElements.link;\r\n  cardImage.alt = \"Фотография: \" + cardElements.name;\r\n  cardDescription.textContent = cardElements.name;\r\n  cardImage.name = cardElements.name;\r\n  /// УДАЛЕНИЕ КАРТОЧКИ\r\n  if (userId === cardElements.owner._id) {\r\n    button.addEventListener(\"click\", function () {\r\n      deleteFunc(card, cardElements._id);\r\n    });\r\n  } else {\r\n    button.style.display = \"none\";\r\n  }\r\n\r\n  likeButton.addEventListener(\"click\", function () {\r\n    if (likeButton.classList.contains(\"card__like-button_is-active\")) {\r\n      deleteLike(cardElements._id)\r\n        .then((data) => {\r\n          likesBox.textContent = data.likes.length;\r\n          likeButton.classList.remove(\"card__like-button_is-active\");\r\n        })\r\n        .catch((error) => {\r\n          console.error(\"Failed to update profile:\", error);\r\n        });\r\n    } else {\r\n      setLike(cardElements._id)\r\n        .then((data) => {\r\n          likeButton.classList.add(\"card__like-button_is-active\");\r\n          likesBox.textContent = data.likes.length;\r\n        })\r\n        .catch((error) => {\r\n          console.error(\"Failed to update like:\", error);\r\n        });\r\n    }\r\n  });\r\n\r\n  /// ОТОБРАЖЕНИЕ КОЛИЧЕСТВА ЛАЙКОВ\r\n  checkLike(cardElements, userId, likeButton);\r\n  const likeNumber = cardElements.likes.length;\r\n  likesBox.textContent = likeNumber;\r\n  /// РАЗВЕРНУТЬ КАРТИНКУ\r\n  cardImage.addEventListener(\"click\", function () {\r\n    openImg(cardImage);\r\n  });\r\n  return card;\r\n}\r\n\r\nfunction checkLike(card, userId, btn) {\r\n  const userArray = card.likes;\r\n  userArray.forEach(function (user) {\r\n    if (user._id === userId) {\r\n      btn.classList.add(\"card__like-button_is-active\");\r\n    }\r\n  });\r\n}\r\n\r\nexport { createCard };\r\n","// ОТКРЫТИЕ И ЗАКРЫТИЕ МОДАЛЬНЫХ ОКОН\r\nfunction openModal(modal) {\r\n  modal.classList.add(\"popup_is-opened\");\r\n  document.addEventListener(\"keydown\", handleEscClose);\r\n}\r\n\r\nfunction closeModal(modal) {\r\n  modal.classList.remove(\"popup_is-opened\");\r\n  document.removeEventListener(\"keydown\", handleEscClose);\r\n}\r\n\r\nfunction handleEscClose(event) {\r\n  if (event.key === \"Escape\" || event.key === 27) {\r\n    const openModal = document.querySelector(\".popup_is-opened\");\r\n    if (openModal) {\r\n      closeModal(openModal);\r\n    }\r\n  }\r\n}\r\n\r\n// Обработчик закрытия модального окна по клику на крестик или оверлей\r\nfunction setupCloseEventListeners(event) {\r\n  const isCloseButton = event.target.classList.contains(\"popup__close\");\r\n  const isOverlay = event.target.classList.contains(\"popup\");\r\n  const openModal = document.querySelector(\".popup_is-opened\");\r\n\r\n  if ((isCloseButton || isOverlay) && openModal) {\r\n    closeModal(openModal);\r\n  }\r\n}\r\n\r\nexport { openModal, closeModal, setupCloseEventListeners };\r\n","const enableValidation = (config, formElement) => {\r\n  const inputElements = formElement.querySelectorAll(config.inputSelector);\r\n  inputElements.forEach(function (input) {\r\n    input.addEventListener(\"input\", function () {\r\n      isValid(input);\r\n    });\r\n  });\r\n  formElement.addEventListener(\"submit\", function (evt) {\r\n    evt.preventDefault();\r\n  });\r\n};\r\n\r\nfunction clearValidation(profileForm, config) {\r\n  const inputElements = profileForm.querySelectorAll(config.inputSelector);\r\n  inputElements.forEach((element) => {\r\n    element.classList.remove(config.inputErrorClass);\r\n    element.setCustomValidity(\"\");\r\n    const errorElement = element.nextElementSibling;\r\n    errorElement.classList.remove(\"popup__error_visible\");\r\n    errorElement.textContent = \"\";\r\n  });\r\n}\r\n\r\nfunction isValid(inputElement) {\r\n  const errorElement = inputElement.nextElementSibling;\r\n  if (inputElement.validity.patternMismatch) {\r\n    inputElement.setCustomValidity(inputElement.dataset.errorMessage);\r\n    inputElement.classList.add(\"popup__input_type_error\");\r\n    errorElement.classList.add(\"popup__error_visible\");\r\n  } else {\r\n    inputElement.classList.remove(\"popup__input_type_error\");\r\n    errorElement.classList.remove(\"popup__error_visible\");\r\n    inputElement.setCustomValidity(\"\");\r\n    errorElement.textContent = \"\";\r\n  }\r\n  if (!inputElement.validity.valid) {\r\n    inputElement.classList.add(\"popup__input_type_error\");\r\n    errorElement.classList.add(\"popup__error_visible\");\r\n    errorElement.textContent = inputElement.validationMessage;\r\n  } else {\r\n    inputElement.classList.remove(\"popup__input_type_error\");\r\n    errorElement.classList.remove(\"popup__error_visible\");\r\n    errorElement.textContent = \"\";\r\n  }\r\n}\r\n\r\nfunction enableToggle(config) {\r\n  const forms = document.querySelectorAll(\".popup__form\");\r\n  forms.forEach(function (formElement) {\r\n    const inputList = Array.from(\r\n      formElement.querySelectorAll(config.inputSelector)\r\n    );\r\n    const buttonElement = formElement.querySelector(\r\n      config.submitButtonSelector\r\n    );\r\n\r\n    inputList.forEach((inputElement) => {\r\n      inputElement.addEventListener(\"input\", function () {\r\n        toggleButtonState(inputList, buttonElement);\r\n      });\r\n    });\r\n  });\r\n}\r\n\r\nfunction hasInvalidInput(input) {\r\n  return input.some((element) => {\r\n    return !element.validity.valid;\r\n  });\r\n}\r\n\r\nfunction toggleButtonState(inputElements, buttonElement) {\r\n  if (hasInvalidInput(inputElements) === true) {\r\n    buttonElement.classList.add(\"popup__button_disabled\");\r\n  } else {\r\n    buttonElement.classList.remove(\"popup__button_disabled\");\r\n  }\r\n}\r\n\r\nexport { enableValidation, clearValidation, isValid, enableToggle };\r\n","import { createCard } from \"./card.js\";\r\n\r\nimport { openModal, closeModal, setupCloseEventListeners } from \"./modal.js\";\r\n\r\nimport {\r\n  getUserData,\r\n  getCardsData,\r\n  updateProfile,\r\n  postCard,\r\n  deleteServerCard,\r\n  newAvatar,\r\n} from \"./api.js\";\r\n\r\nimport {\r\n  enableValidation,\r\n  clearValidation,\r\n  enableToggle,\r\n} from \"./validation.js\";\r\n\r\nconst objElements = {\r\n  formSelector: \".popup__form\",\r\n  inputSelector: \".popup__input\",\r\n  submitButtonSelector: \".popup__button\",\r\n  inactiveButtonClass: \"popup__button_disabled\",\r\n  inputErrorClass: \"popup__input_type_error\",\r\n  errorClass: \"popup__error_visible\",\r\n};\r\n\r\nconst content = document.querySelector(\".content\");\r\nconst popups = document.querySelectorAll(\".popup\");\r\nconst pageSection = content.querySelector(\".places.page__section\");\r\nconst placesList = pageSection.querySelector(\".places__list\");\r\nconst profile = content.querySelector(\".profile.page__section\");\r\nconst profileInfo = profile.querySelector(\".profile__info\");\r\nconst avatarImg = profile.querySelector(\".profile__image\");\r\nconst nameContent = profileInfo.querySelector(\".profile__title\");\r\nconst jobContent = profileInfo.querySelector(\".profile__description\");\r\nconst profileEditBtn = profileInfo.querySelector(\".profile__edit-button\");\r\nconst profileAddBtn = profile.querySelector(\".profile__add-button\");\r\n///  РАЗВЕРНУТЬ КАРТИНКУ\r\nconst popupCardImg = document.querySelector(\".popup.popup_type_image\");\r\nconst popupContImg = popupCardImg.querySelector(\r\n  \".popup__content.popup__content_content_image\"\r\n);\r\nconst popupImg = popupContImg.querySelector(\".popup__image\");\r\nconst popupImgCaption = popupContImg.querySelector(\".popup__caption\");\r\n/// РЕДАКТИРОВАТЬ ПРОФИЛЬ\r\nconst popupProfile = document.querySelector(\".popup.popup_type_edit\");\r\nconst profileCont = popupProfile.querySelector(\".popup__content\");\r\nconst profileForm = profileCont.querySelector(\".popup__form\");\r\nconst nameInput = profileForm.querySelector(\r\n  \".popup__input.popup__input_type_name\"\r\n);\r\nconst jobInput = profileForm.querySelector(\r\n  \".popup__input.popup__input_type_description\"\r\n);\r\nconst profileBtn = profileForm.querySelector(\".button.popup__button\");\r\n/// РЕДАКТИРОВАНИЕ ПРОФИЛЯ\r\nconst popupAvatar = document.querySelector(\".popup.popup_type_new-avatar\");\r\nconst avatarCont = popupAvatar.querySelector(\".popup__content\");\r\nconst avatarForm = avatarCont.querySelector(\".popup__form\");\r\nconst inputAvatar = avatarForm.querySelector(\r\n  \".popup__input.popup__input_type_url\"\r\n);\r\nconst avatarButton = avatarForm.querySelector(\".button.popup__button\");\r\n/// ФОРМА ДОБАВЛЕНИЯ НОВЫХ КАРТОЧЕК\r\nconst popupNewCard = document.querySelector(\".popup.popup_type_new-card\");\r\nconst newCardCont = popupNewCard.querySelector(\".popup__content\");\r\nconst newCardForm = newCardCont.querySelector(\".popup__form\");\r\nconst popupButton = newCardForm.querySelector(\".button.popup__button\");\r\nconst placeInput = newCardForm.querySelector(\r\n  \".popup__input.popup__input_type_card-name\"\r\n);\r\nconst linkInput = newCardForm.querySelector(\r\n  \".popup__input.popup__input_type_url\"\r\n);\r\n\r\nfunction allFetch() {\r\n  Promise.all([getUserData(), getCardsData()])\r\n    .then(([userData, cards]) => {\r\n      createCards(cards, userData._id);\r\n      createProfile(userData);\r\n    })\r\n    .catch((error) => {\r\n      console.error(\"Error processing data: \", error);\r\n    });\r\n}\r\nallFetch();\r\n\r\nfunction createCards(array, userId) {\r\n  array.forEach(function (elements) {\r\n    const card = createCard(elements, deleteCard, openImgWindow, userId);\r\n    placesList.append(card);\r\n  });\r\n}\r\n\r\npopups.forEach(function (element) {\r\n  element.classList.add(\"popup_is-animated\");\r\n  element.addEventListener(\"click\", function (event) {\r\n    setupCloseEventListeners(event);\r\n  });\r\n});\r\n\r\n/// ОТКРЫТИЕ ФОРМЫ ДОБАВЛЕНИЯ КАРТОЧЕК\r\nprofileAddBtn.addEventListener(\"click\", function () {\r\n  popupButton.textContent = \"Сохранить\";\r\n  openModal(popupNewCard);\r\n  popupButton.classList.add(\"popup__button_disabled\");\r\n  newCardForm.reset();\r\n  clearValidation(newCardForm, objElements);\r\n});\r\n\r\n/// ОТОБРАЖЕНИЕ ДАННЫХ ПРОФИЛЯ\r\nfunction createProfile(data) {\r\n  nameContent.textContent = data.name;\r\n  jobContent.textContent = data.about;\r\n  const link = data.avatar;\r\n  avatarImg.style.backgroundImage = `url('${link}')`;\r\n}\r\n\r\n/// ОТКРЫТИЕ РЕДАКТИРОВАНИЯ ПРОФИЛЯ\r\nprofileEditBtn.addEventListener(\"click\", function () {\r\n  openModal(popupProfile);\r\n  profileBtn.textContent = \"Сохранить\";\r\n  clearValidation(popupProfile, objElements);\r\n  nameInput.value = nameContent.textContent;\r\n  jobInput.value = jobContent.textContent;\r\n});\r\n\r\n/// ОТКРЫТИЕ ПОЛНОЭКРАННОЙ КАРТИНКИ\r\nfunction openImgWindow(input) {\r\n  openModal(popupCardImg);\r\n  popupImg.src = input.src;\r\n  popupImg.alt = input.alt;\r\n  popupImgCaption.textContent = input.name;\r\n}\r\n\r\n/// ОТКРЫТИЕ РЕДАКТИРОВАНИЕ АВАТАРА\r\navatarImg.addEventListener(\"click\", function () {\r\n  openModal(popupAvatar);\r\n  avatarButton.textContent = \"Сохранить\";\r\n  avatarButton.classList.add(\"popup__button_disabled\");\r\n  avatarForm.reset();\r\n});\r\n\r\n/// РЕДАКТИРОВАНИЕ ПРОФИЛЯ\r\nprofileForm.addEventListener(\"submit\", handleFormSubmit);\r\nfunction handleFormSubmit(evt) {\r\n  evt.preventDefault();\r\n  profileBtn.textContent = \"Сохранение...\";\r\n  const name = nameInput.value;\r\n  const job = jobInput.value;\r\n  updateProfile(name, job)\r\n    .then((data) => {\r\n      console.log(\"Profile updated:\", data);\r\n      nameContent.textContent = name;\r\n      jobContent.textContent = job;\r\n      closeModal(popupProfile);\r\n    })\r\n    .catch((error) => {\r\n      console.error(\"Failed to update profile:\", error);\r\n    })\r\n    .finally(() => {\r\n      profileBtn.textContent = \"Сохранить\";\r\n    });\r\n}\r\n\r\n/// ДОБАВЛЕНИЕ НОВОЙ КАРТОЧКИ\r\npopupNewCard.addEventListener(\"submit\", formSubmit);\r\nfunction formSubmit(evt) {\r\n  evt.preventDefault();\r\n  popupButton.textContent = \"Сохранение...\";\r\n  const place = placeInput.value;\r\n  const link = linkInput.value;\r\n  postCard(place, link)\r\n    .then((data) => {\r\n      console.log(\"Profile updated:\", data);\r\n      const userId = data.owner._id;\r\n      const newCard = createCard(data, deleteCard, openImgWindow, userId);\r\n      placesList.prepend(newCard);\r\n      closeModal(popupNewCard);\r\n      newCardForm.reset();\r\n    })\r\n    .catch((error) => {\r\n      console.error(\"Failed to update profile:\", error);\r\n    })\r\n    .finally(() => {\r\n      popupButton.textContent = \"Сохранить\";\r\n    });\r\n}\r\n\r\n/// РЕДАКТИРОВАНИЕ АВАТАРА ПОЛЬЗОВАТЕЛЯ\r\npopupAvatar.addEventListener(\"submit\", avatarSubmit);\r\nfunction avatarSubmit(evt) {\r\n  evt.preventDefault();\r\n  avatarButton.textContent = \"Сохранение...\";\r\n  const link = inputAvatar.value;\r\n  newAvatar(link)\r\n    .then((data) => {\r\n      console.log(\"Profile updated:\", data);\r\n      const link = data.avatar;\r\n      avatarImg.style.backgroundImage = `url('${link}')`;\r\n      closeModal(popupAvatar);\r\n      avatarForm.reset();\r\n    })\r\n    .catch((error) => {\r\n      console.error(\"Failed to update profile:\", error);\r\n    })\r\n    .finally(() => {\r\n      avatarButton.textContent = \"Сохранить\";\r\n    });\r\n}\r\n\r\n/// ОБЕСПЕЧЕНИЕ ВАЛИДАЦИИ\r\nconst forms = document.querySelectorAll(\".popup__form\");\r\nforms.forEach(function (formElement) {\r\n  enableValidation(objElements, formElement);\r\n});\r\n\r\n/// ОБЕСПЕЧЕНИЕ ПЕРЕКЛЮЧЕНИЯ СОСТОЯНИЯ КНОПОК\r\nenableToggle(objElements);\r\nfunction deleteCard(input, cardId) {\r\n  deleteServerCard(cardId)\r\n    .then(() => {\r\n      input.remove();\r\n    })\r\n    .catch((error) => {\r\n      console.error(\"Failed to remove card:\", error);\r\n    });\r\n}\r\n"],"names":["config","baseUrl","headers","authorization","createCard","cardElements","deleteFunc","openImg","userId","card","document","querySelector","content","cloneNode","button","cardContainer","likesBox","likeButton","cardImage","cardDescription","src","link","alt","name","textContent","owner","_id","addEventListener","style","display","id","classList","contains","fetch","concat","method","then","response","ok","json","Promise","reject","res","status","data","likes","length","remove","catch","error","console","Error","setLike","add","btn","forEach","user","checkLike","likeNumber","openModal","modal","handleEscClose","closeModal","removeEventListener","event","key","clearValidation","profileForm","querySelectorAll","inputSelector","element","inputErrorClass","setCustomValidity","errorElement","nextElementSibling","objElements","formSelector","submitButtonSelector","inactiveButtonClass","errorClass","popups","placesList","profile","profileInfo","avatarImg","nameContent","jobContent","profileEditBtn","profileAddBtn","popupCardImg","popupContImg","popupImg","popupImgCaption","popupProfile","nameInput","jobInput","profileBtn","popupAvatar","avatarForm","inputAvatar","avatarButton","popupNewCard","newCardForm","popupButton","placeInput","linkInput","openImgWindow","input","deleteCard","cardId","all","_ref","array","_ref2","userData","elements","append","about","avatar","backgroundImage","createProfile","isCloseButton","target","isOverlay","setupCloseEventListeners","reset","value","evt","preventDefault","job","body","JSON","stringify","updateProfile","log","finally","place","postCard","newCard","prepend","formElement","inputElement","validity","patternMismatch","dataset","errorMessage","valid","validationMessage","enableValidation","inputList","Array","from","buttonElement","inputElements","some","toggleButtonState","enableToggle"],"sourceRoot":""}